(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{19553:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return r(32601)}])},32601:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ne}});var n=r(34051),o=r.n(n),a=r(85893),l=r(67294),s=r(83544),c=r(87462),i=r(13871),u=r(86010),d=r(98459),p=r(28935),f=r(12519),h=r(92248);function v(e){var t=e.children,r=e.className,n=(0,u.Z)(r),o=(0,p.Z)(v,e),a=(0,f.Z)(v,e);return l.createElement(a,(0,c.Z)({},o,{className:n}),t)}v.handledProps=["as","children","className"],v.defaultProps={as:"tbody"},v.propTypes={};var m=v,y=r(69591),b=r(45150);function g(e){var t=e.active,r=e.children,n=e.className,o=e.collapsing,a=e.content,s=e.disabled,i=e.error,v=e.icon,m=e.negative,y=e.positive,w=e.selectable,x=e.singleLine,j=e.textAlign,Z=e.verticalAlign,P=e.warning,C=e.width,R=(0,u.Z)((0,d.lG)(t,"active"),(0,d.lG)(o,"collapsing"),(0,d.lG)(s,"disabled"),(0,d.lG)(i,"error"),(0,d.lG)(m,"negative"),(0,d.lG)(y,"positive"),(0,d.lG)(w,"selectable"),(0,d.lG)(x,"single line"),(0,d.lG)(P,"warning"),(0,d.X4)(j),(0,d.Ok)(Z),(0,d.H0)(C,"wide"),n),k=(0,p.Z)(g,e),G=(0,f.Z)(g,e);return h.kK(r)?l.createElement(G,(0,c.Z)({},k,{className:R}),b.Z.create(v),a):l.createElement(G,(0,c.Z)({},k,{className:R}),r)}g.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],g.defaultProps={as:"td"},g.propTypes={},g.create=(0,y.u5)(g,(function(e){return{content:e}}));var w=g;function x(e){var t=e.children,r=e.className,n=e.content,o=e.fullWidth,a=(0,u.Z)((0,d.lG)(o,"full-width"),r),s=(0,p.Z)(x,e),i=(0,f.Z)(x,e);return l.createElement(i,(0,c.Z)({},s,{className:a}),h.kK(t)?n:t)}x.handledProps=["as","children","className","content","fullWidth"],x.defaultProps={as:"thead"},x.propTypes={};var j=x;function Z(e){var t=e.as,r=(0,p.Z)(Z,e);return l.createElement(j,(0,c.Z)({},r,{as:t}))}Z.handledProps=["as"],Z.propTypes={},Z.defaultProps={as:"tfoot"};var P=Z;function C(e){var t=e.as,r=e.className,n=e.sorted,o=(0,u.Z)((0,d.cD)(n,"sorted"),r),a=(0,p.Z)(C,e);return l.createElement(w,(0,c.Z)({},a,{as:t,className:o}))}C.handledProps=["as","className","sorted"],C.propTypes={},C.defaultProps={as:"th"};var R=C;function k(e){var t=e.active,r=e.cellAs,n=e.cells,o=e.children,a=e.className,s=e.disabled,v=e.error,m=e.negative,y=e.positive,b=e.textAlign,g=e.verticalAlign,x=e.warning,j=(0,u.Z)((0,d.lG)(t,"active"),(0,d.lG)(s,"disabled"),(0,d.lG)(v,"error"),(0,d.lG)(m,"negative"),(0,d.lG)(y,"positive"),(0,d.lG)(x,"warning"),(0,d.X4)(b),(0,d.Ok)(g),a),Z=(0,p.Z)(k,e),P=(0,f.Z)(k,e);return h.kK(o)?l.createElement(P,(0,c.Z)({},Z,{className:j}),(0,i.Z)(n,(function(e){return w.create(e,{defaultProps:{as:r}})}))):l.createElement(P,(0,c.Z)({},Z,{className:j}),o)}k.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],k.defaultProps={as:"tr",cellAs:"td"},k.propTypes={},k.create=(0,y.u5)(k,(function(e){return{cells:e}}));var G=k;function O(e){var t=e.attached,r=e.basic,n=e.celled,o=e.children,a=e.className,s=e.collapsing,v=e.color,y=e.columns,b=e.compact,g=e.definition,w=e.fixed,x=e.footerRow,Z=e.headerRow,C=e.headerRows,R=e.inverted,k=e.padded,_=e.renderBodyRow,A=e.selectable,N=e.singleLine,E=e.size,q=e.sortable,T=e.stackable,H=e.striped,B=e.structured,z=e.tableData,L=e.textAlign,S=e.unstackable,F=e.verticalAlign,D=(0,u.Z)("ui",v,E,(0,d.lG)(n,"celled"),(0,d.lG)(s,"collapsing"),(0,d.lG)(g,"definition"),(0,d.lG)(w,"fixed"),(0,d.lG)(R,"inverted"),(0,d.lG)(A,"selectable"),(0,d.lG)(N,"single line"),(0,d.lG)(q,"sortable"),(0,d.lG)(T,"stackable"),(0,d.lG)(H,"striped"),(0,d.lG)(B,"structured"),(0,d.lG)(S,"unstackable"),(0,d.sU)(t,"attached"),(0,d.sU)(r,"basic"),(0,d.sU)(b,"compact"),(0,d.sU)(k,"padded"),(0,d.X4)(L),(0,d.Ok)(F),(0,d.H0)(y,"column"),"table",a),X=(0,p.Z)(O,e),K=(0,f.Z)(O,e);if(!h.kK(o))return l.createElement(K,(0,c.Z)({},X,{className:D}),o);var U={defaultProps:{cellAs:"th"}},I=(Z||C)&&l.createElement(j,null,G.create(Z,U),(0,i.Z)(C,(function(e){return G.create(e,U)})));return l.createElement(K,(0,c.Z)({},X,{className:D}),I,l.createElement(m,null,_&&(0,i.Z)(z,(function(e,t){return G.create(_(e,t))}))),x&&l.createElement(P,null,G.create(x)))}O.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],O.defaultProps={as:"table"},O.propTypes={},O.Body=m,O.Cell=w,O.Footer=P,O.Header=j,O.HeaderCell=R,O.Row=G;var _=O,A=r(80967),N=r(96215),E=r(35870),q=r(1508);function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,r,n,o,a,l){try{var s=e[a](l),c=s.value}catch(i){return void r(i)}s.done?t(c):Promise.resolve(c).then(n,o)}function B(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){H(a,n,o,l,s,"next",e)}function s(e){H(a,n,o,l,s,"throw",e)}l(void 0)}))}}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function D(e,t){return!t||"object"!==K(t)&&"function"!==typeof t?T(e):t}function X(e,t){return X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},X(e,t)}var K=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=F(e);if(t){var o=F(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return D(this,r)}}var I=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(s,e);var t,r,n,l=U(s);function s(){var e;z(this,s);var t=T(e=l.apply(this,arguments));S(T(e),"onApprove",B(o().mark((function e(){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,E.Z)(t.props.address),e.next=3,q.Z.eth.getAccounts();case 3:return n=e.sent,e.next=6,r.methods.approveRequest(t.props.id).send({from:n[0]});case 6:case"end":return e.stop()}}),e)}))));var r=T(e);return S(T(e),"onFinalize",B(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,E.Z)(r.props.address),e.next=3,q.Z.eth.getAccounts();case 3:return n=e.sent,e.next=6,t.methods.finalizeRequest(r.props.id).send({from:n[0]});case 6:case"end":return e.stop()}}),e)})))),e}return t=s,(r=[{key:"render",value:function(){var e=this.props,t=e.id,r=e.request,n=e.approversCount,o=r.approvalsCount>n/2;return(0,a.jsxs)(_.Row,{disabled:r.complete,positive:o&&!r.complete,children:[(0,a.jsx)(_.Cell,{children:t}),(0,a.jsx)(_.Cell,{children:r.description}),(0,a.jsx)(_.Cell,{children:q.Z.utils.fromWei(r.value,"ether")}),(0,a.jsx)(_.Cell,{children:r.recipient}),(0,a.jsx)(_.Cell,{children:"".concat(r.approvalsCount,"/").concat(n)}),(0,a.jsx)(_.Cell,{children:r.complete?null:(0,a.jsx)(A.Z,{color:"green",onClick:this.onApprove,children:"Approve"})}),(0,a.jsx)(_.Cell,{children:r.complete?null:(0,a.jsx)(A.Z,{color:"red",onClick:this.onFinalize,children:"Finalize"})})]})}}])&&L(t.prototype,r),n&&L(t,n),s}(l.Component),W=I;function J(e,t,r,n,o,a,l){try{var s=e[a](l),c=s.value}catch(i){return void r(i)}s.done?t(c):Promise.resolve(c).then(n,o)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function Y(e,t){return!t||"object"!==ee(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e,t){return $=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$(e,t)}var ee=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=V(e);if(t){var o=V(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Y(this,r)}}var re=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(c,e);var t,r,n,l=te(c);function c(){return M(this,c),l.apply(this,arguments)}return t=c,n=[{key:"getInitialProps",value:function(e){return(t=o().mark((function t(){var r,n,a,l,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.query.address,n=(0,E.Z)(r),t.next=4,n.methods.getRequestCount().call();case 4:return a=t.sent,t.next=7,n.methods.getSummary().call();case 7:return l=t.sent,t.next=10,Promise.all(Array(parseInt(a)).fill().map((function(e,t){return n.methods.requests(t).call()})));case 10:return s=t.sent,t.abrupt("return",{address:r,requests:s,summary:l,requestCount:a});case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function l(e){J(a,n,o,l,s,"next",e)}function s(e){J(a,n,o,l,s,"throw",e)}l(void 0)}))})();var t}}],(r=[{key:"renderRow",value:function(){var e=this;return this.props.requests.map((function(t,r){return(0,a.jsx)(W,{id:r,request:t,address:e.props.address,approversCount:e.props.summary[3]},r)}))}},{key:"render",value:function(){return(0,a.jsxs)(s.Z,{children:[(0,a.jsx)("h3",{children:"Request List"}),(0,a.jsx)(N.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,a.jsx)("a",{children:(0,a.jsx)(A.Z,{primary:!0,floated:"right",style:{marginBottom:"10px"},children:"Add Requests"})})}),(0,a.jsxs)(_,{singleLine:!0,children:[(0,a.jsx)(_.Header,{children:(0,a.jsxs)(_.Row,{children:[(0,a.jsx)(_.HeaderCell,{children:"ID"}),(0,a.jsx)(_.HeaderCell,{children:"Description"}),(0,a.jsx)(_.HeaderCell,{children:"Amount"}),(0,a.jsx)(_.HeaderCell,{children:"Recipient"}),(0,a.jsx)(_.HeaderCell,{children:"Approval Count"}),(0,a.jsx)(_.HeaderCell,{children:"Approve"}),(0,a.jsx)(_.HeaderCell,{children:"Finalize"})]})}),(0,a.jsx)(_.Body,{children:this.renderRow()})]}),(0,a.jsxs)("div",{children:["Found ",this.props.requestCount," requests."]})]})}}])&&Q(t.prototype,r),n&&Q(t,n),c}(l.Component),ne=re}},function(e){e.O(0,[774,482,714,145,682,888,179],(function(){return t=19553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);